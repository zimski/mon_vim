" ~/mon_vim/sessions/tests.vim:
" Vim session script.
" Created by session.vim 2.13 on 07 janvier 2016 at 15:24:24.
" Open this file in Vim and run :source % to restore your session.

if exists('g:syntax_on') != 1 | syntax on | endif
if exists('g:did_load_filetypes') != 1 | filetype on | endif
if exists('g:did_load_ftplugin') != 0 | filetype plugin off | endif
if exists('g:did_indent_on') != 1 | filetype indent on | endif
if &background != 'light'
	set background=light
endif
if !exists('g:colors_name') || g:colors_name != 'molokai' | colorscheme molokai | endif
call setqflist([{'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf = HttpTest.create(*find_lb)'}, {'lnum': 20, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-debug''] = ''true'''}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''10000'''}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.get_until_code "503", ''/'', "test-domain.com", {''Cookie'' => ''frz-canary=true;''}'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.has ''/'', "test-domain.com"'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.get_until_code "200", ''/'', "test-domain.com", {''Cookie'' => ''frz-canary=true;''}'}, {'lnum': 42, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.has ''/'', "test-domain.com"'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.get_until_code "503", ''/'', "test-domain.com", {''Cookie'' => ''frz-canary=true;''}'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/infra/canary_test.rb', 'text': '    @fasterize_ptf.has ''/'', "test-domain.com"'}, {'lnum': 47, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf = HttpTest.create(*find_lb)'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-debug''] = ''true'''}, {'lnum': 49, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''10000'''}, {'lnum': 50, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf.default_headers[''Cookie''] = ''frz-canary=true'' if canary_mode?'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version''] if @api.resp[''x-version'']'}, {'lnum': 143, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @config_version = @fasterize_ptf.default_headers[''x-frz-cversion''] = @api.resp[''x-version'']'}, {'lnum': 178, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional_helper.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"pragma" => "no-cache"}'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_res_eligible'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 20, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"pragma" => "no-cache"}'}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized(url, @domain, {"pragma" => "no-cache"})'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 31, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 33, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    concat_style_urls = @fasterize_ptf.resp.body.scan(/<link.*href="([^"]+)"/)'}, {'lnum': 35, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, sharding_domain'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_style_urls[0][0]'}, {'lnum': 39, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, sharding_domain'}, {'lnum': 43, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 44, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized(url, @domain,{"pragma" => "no-cache"})'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 46, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    concat_style_urls = @fasterize_ptf.resp.body.scan(/<link.*href="([^"]+)"/)'}, {'lnum': 56, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"pragma" => "no-cache"}'}, {'lnum': 57, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 58, 'col': 43, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_not_match /dummy-domain.com/, @fasterize_ptf.resp.body'}, {'lnum': 65, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"pragma" => "no-cache"}'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 70, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "dummy-domain.com"'}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached ''/'' + file_path, @domain'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has ''/'' + file_path, @domain'}, {'lnum': 86, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 87, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 94, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached ''/'' + file_path, @domain'}, {'lnum': 95, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has(''/imgs/logo.png'', get_sharded_domain_only(''/imgs/logo.png'', @domain))'}, {'lnum': 102, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 108, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized "/", @domain'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 114, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has_from_html pack_file'}, {'lnum': 117, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 124, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has_from_html pack_file'}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_virtual'}, {'lnum': 126, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_not_nil @fasterize_ptf.resp["X-Unique-Id"]'}, {'lnum': 134, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached file_path, get_sharded_domain_only(file_path, @domain)'}, {'lnum': 135, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 143, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get file_path, @domain'}, {'lnum': 144, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 152, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 153, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 158, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 161, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"pragma" => "no-cache"}'}, {'lnum': 162, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 172, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 175, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached forced_cache_url, @domain'}, {'lnum': 176, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 177, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 178, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=604800"'}, {'lnum': 179, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 182, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized not_cached_url, @domain'}, {'lnum': 183, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 184, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", "toto=1; Domain=test-devfe.fstrz.net; Path=/; Expires=Sat, 01 Jan 2022 00:00:00 GMT, tata=1; Domain=.fstrz.net; Path=/; Expires=Sat, 01 Jan 2022 00:00:00 GMT"'}, {'lnum': 185, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_not_equal @fasterize_ptf.resp["cache-control"], "max-age=604800"'}, {'lnum': 193, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 195, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached cache_url, @domain'}, {'lnum': 196, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 197, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 198, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=0, s-maxage=604800"'}, {'lnum': 199, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    assert_not_nil @fasterize_ptf.resp[''last-modified'']'}, {'lnum': 200, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 208, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 211, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached forced_cache_url, @domain'}, {'lnum': 212, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 213, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 214, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=604800"'}, {'lnum': 215, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/customer_config_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-eversion''] = @api.resp[''x-version'']'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 28, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 33, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-eversion''] = @api.resp[''x-version'']'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.get_until_direct_proxying url, @demo_domain, {}, 20'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-eversion''] = @api.resp[''x-version'']'}, {'lnum': 46, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.get_until_code "200", url, @domain'}, {'lnum': 50, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-eversion''] = @api.resp[''x-version'']'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/failover/disable_test.rb', 'text': '    @fasterize_ptf.get_until_code "404", url, @domain'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 14, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 15, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 17, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < @origin.resp.body.length'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 31, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 32, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < @origin.resp.body.length'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 41, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 44, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '      @fasterize_ptf.get url, @domain'}, {'lnum': 45, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '      @fasterize_ptf.assert_not_cached'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 55, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 56, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url + "&frz-minifyhtml=true&frz-minifyhtml-keepcomment=false&frz-deferjs=false", @preview_domain'}, {'lnum': 72, 'col': 78, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_match /<!--\[if IE 9\]><script src=.*><\/script><!\[endif\]-->/, @fasterize_ptf.resp.body'}, {'lnum': 73, 'col': 49, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_not_match /<!\-\- comment 2 \-\->/, @fasterize_ptf.resp.body'}, {'lnum': 74, 'col': 55, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_not_match /<!\-\-SVC4\[PRDMC3_2601\-\->/, @fasterize_ptf.resp.body'}, {'lnum': 75, 'col': 83, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_not_match /<!\-\- Start eXTReMe Non Public Tracker Code V3\/5 Login/, @fasterize_ptf.resp.body'}, {'lnum': 76, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''EXs=screen;EXw=EXs.width;navigator.appName!="Netscape"?'''}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url + "&frz-minifyhtml=true&frz-minifyhtml-keepcomment=true&frz-deferjs=false", @preview_domain'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 82, 'col': 78, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_match /<!--\[if IE 9\]><script src=.*><\/script><!\[endif\]-->/, @fasterize_ptf.resp.body'}, {'lnum': 83, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<!-- comment 2 -->'''}, {'lnum': 84, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<!--SVC4[PRDMC3_2601-->'''}, {'lnum': 85, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<!-- Start eXTReMe Non Public Tracker Code V3/5 Login'''}, {'lnum': 86, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''EXs=screen;EXw=EXs.width;navigator.appName!="Netscape"?'''}, {'lnum': 95, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.has url, @preview_domain'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 98, 'col': 73, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/minification_test.rb', 'text': '    assert_match /img src="\/ image  with 2 consecutives spaces.jpg"/, @fasterize_ptf.resp.body'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "image/png"'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "image/png"'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/optim_proxy_test.rb', 'text': '    @fasterize_ptf.assert_res_eligible'}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.has url, @domain, @accept_gzip_headers'}, {'lnum': 22, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 23, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    content = gunzip_content(@fasterize_ptf.resp.body)'}, {'lnum': 24, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid content'}, {'lnum': 37, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.has url, @domain, @accept_gzip_headers'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', nil'}, {'lnum': 40, 'col': 41, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    assert_match /Welcome to Express/, @fasterize_ptf.resp.body, ''Could not find some page content'''}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.has url, @domain, @accept_gzip_headers'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 54, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 55, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    content = gunzip_content(@fasterize_ptf.resp.body)'}, {'lnum': 56, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid content'}, {'lnum': 71, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.has url, @domain, @accept_gzip_headers'}, {'lnum': 72, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 74, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    content = gunzip_content(@fasterize_ptf.resp.body)'}, {'lnum': 75, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid content'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, @accept_gzip_headers'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 81, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 82, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    content = gunzip_content(@fasterize_ptf.resp.body)'}, {'lnum': 83, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid content'}, {'lnum': 94, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get url, @domain, @accept_gzip_headers'}, {'lnum': 95, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 97, 'col': 38, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    assert_equal @origin.resp.body, @fasterize_ptf.resp.body'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, @accept_gzip_headers'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 102, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 112, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get url, @domain, @accept_gzip_headers'}, {'lnum': 113, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 114, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 115, 'col': 38, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    assert_equal @origin.resp.body, @fasterize_ptf.resp.body'}, {'lnum': 118, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, @accept_gzip_headers'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 120, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 127, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get url, @domain, @accept_gzip_headers'}, {'lnum': 128, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', ''gzip'''}, {'lnum': 131, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 132, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-type'', ''text/javascript'''}, {'lnum': 133, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/gzip_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-encoding'', nil'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 11, 'col': 51, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal ''http://'' + @demo_domain + "/", @fasterize_ptf.resp[''location'']'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 19, 'col': 44, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal ''http://www.google.com'', @fasterize_ptf.resp[''location'']'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 27, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal ''/toto'', @fasterize_ptf.resp[''location'']'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 35, 'col': 50, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal "http://#{@demo_domain}/toto", @fasterize_ptf.resp[''location'']'}, {'lnum': 44, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @demo_domain'}, {'lnum': 45, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(/href="([^"]+)/).length, "Has one href in page"'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.has demo_css, get_sharded_domain_only(demo_css, @demo_domain)'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.has url, @demo_domain'}, {'lnum': 62, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 63, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 65, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(/http:\/\/#{@demo_domain}\//).size, "We should have replaced one link"'}, {'lnum': 66, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(shardRegex).size, "We should have replaced one src with sharded domain"'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/demo_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 23, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 28, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=true", @abdomain, {''Pragma'' => ''no-cache''}'}, {'lnum': 31, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 32, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''true'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 33, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_res_eligible'}, {'lnum': 34, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=!0'''}, {'lnum': 35, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal @fasterize_ptf.cookies[''UserID''].value, ''JohnDoe'';'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Should'', ''Bhere'''}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.enable_cookies # Reset cookies'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=false", @abdomain, {''Pragma'' => ''no-cache''}'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 41, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''false'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 42, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 43, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=false'';'}, {'lnum': 44, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal @fasterize_ptf.cookies[''UserID''].value, ''JohnDoe'';'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Should'', ''Bhere'''}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has url, @abdomain, {''Pragma'' => ''no-cache'', ''Cookie'' => ''fstrz=true''}'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 53, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_nil @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 54, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_res_eligible'}, {'lnum': 55, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Should'', ''Bhere'''}, {'lnum': 56, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=!0'';'}, {'lnum': 57, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 63, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has url, @abdomain, {''Pragma'' => ''no-cache'', ''Cookie'' => ''fstrz=false''}'}, {'lnum': 64, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 65, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_nil @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 66, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 67, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Should'', ''Bhere'''}, {'lnum': 68, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=false'';'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 74, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @abdomain, {''Cookie'' => ''fstrz=true''}'}, {'lnum': 76, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 77, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=true", @abdomain'}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 79, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''true'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_cache_call_back'}, {'lnum': 81, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 82, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=!0'';'}, {'lnum': 84, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=false", @abdomain'}, {'lnum': 86, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 87, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''false'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 88, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_wontoptimize_abtesting'}, {'lnum': 89, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 90, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=false'';'}, {'lnum': 95, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached url, @abdomain, {''Cookie'' => ''fstrz=true''}'}, {'lnum': 97, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.enable_cookies'}, {'lnum': 98, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.has "#{url}&frz-abtest=true", @abdomain'}, {'lnum': 99, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 100, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''true'', @secure_fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 101, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_cache_call_back'}, {'lnum': 102, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_optimized_cached'}, {'lnum': 103, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, ''fstrz=!0'';'}, {'lnum': 105, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.enable_cookies'}, {'lnum': 106, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.has "#{url}&frz-abtest=false", @abdomain'}, {'lnum': 107, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 108, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_equal ''false'', @secure_fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 109, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_wontoptimize_abtesting'}, {'lnum': 110, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @secure_fasterize_ptf.assert_not_cached'}, {'lnum': 111, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, ''fstrz=false'';'}, {'lnum': 118, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(img, get_sharded_domain_only(img, @abdomain))'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 120, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 123, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 124, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.has img, get_sharded_domain_only(img, @abdomain)'}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 126, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/abtesting_test.rb', 'text': '    assert_nil @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 14, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 15, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 22, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 23, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 24, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 35, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 37, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "s-maxage=0, private, no-cache,max-age=3600"'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 41, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 42, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "no-cache,max-age=3600"'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 54, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 55, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 57, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 58, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 60, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_not_nil @fasterize_ptf.resp["cache-control"]'}, {'lnum': 61, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_not_nil @fasterize_ptf.resp["expires"]'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 71, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "404"'}, {'lnum': 72, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 82, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 83, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 84, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get max_age_zero, @domain'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 99, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=0'''}, {'lnum': 103, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get max_age_one, @domain'}, {'lnum': 104, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 105, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 106, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 107, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''s-maxage=0, private, max-age=1'''}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 117, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 118, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 128, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 129, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 130, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 131, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 140, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 141, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 142, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 143, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 152, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 153, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 154, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 155, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 156, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 165, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 166, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 167, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 168, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 169, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 178, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 179, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 180, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 189, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 190, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 191, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 201, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 202, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 203, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 204, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''s-maxage=0, private, max-age=150'''}, {'lnum': 206, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 207, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 208, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=150'''}, {'lnum': 218, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 219, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 220, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 222, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 223, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 224, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Expires'', ''Fri, 20 Jul 2057 09:06:24 GMT'''}, {'lnum': 230, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.post url, "cappucino", @domain'}, {'lnum': 231, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 232, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 238, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.put url, "sucre", @domain'}, {'lnum': 239, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 240, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 242, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.put url, "cappucino", @domain'}, {'lnum': 243, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 244, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 250, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.delete url, @domain'}, {'lnum': 251, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 252, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 261, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 262, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 263, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 265, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 266, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 268, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {''Pragma'' => ''no-cache''}'}, {'lnum': 269, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 270, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 279, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 280, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 281, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 283, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 284, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 286, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {''Cache-Control'' => ''no-cache''}'}, {'lnum': 287, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 288, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 300, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 301, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 312, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 313, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 319, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 320, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 323, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain, {"Accept-encoding" => nil}'}, {'lnum': 324, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    etag = @fasterize_ptf.resp["ETag"]'}, {'lnum': 325, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain, {"If-None-Match" => etag}'}, {'lnum': 326, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 304'}, {'lnum': 329, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has "#{url}&test42", @domain'}, {'lnum': 330, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_dynamic_cached'}, {'lnum': 333, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-test42", @domain'}, {'lnum': 334, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_dynamic_cached'}, {'lnum': 336, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"Cookie" => "fstrz=false"}'}, {'lnum': 337, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_dynamic_cached'}, {'lnum': 341, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 342, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_dynamic_cached'}, {'lnum': 352, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 353, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 356, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain, {"Accept-encoding" => nil}'}, {'lnum': 357, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    etag = @fasterize_ptf.resp["ETag"]'}, {'lnum': 359, 'col': 16, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    matches = @fasterize_ptf.resp.body.scan(/q.?=([0-9]+)/)'}, {'lnum': 363, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain, {"If-None-Match" => etag}'}, {'lnum': 364, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 304'}, {'lnum': 377, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 383, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 413, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 415, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.post forced_cache_url, "", @domain'}, {'lnum': 416, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 417, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", nil'}, {'lnum': 418, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp.body, "<big>POST</big>"'}, {'lnum': 420, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached forced_cache_url, @domain'}, {'lnum': 421, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 422, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=604800"'}, {'lnum': 423, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_wontoptimize_cacheable'}, {'lnum': 424, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp.body, "<big>GET</big>"'}, {'lnum': 426, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached forced_cache_url, @domain'}, {'lnum': 427, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 428, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 429, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=604800"'}, {'lnum': 430, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_wontoptimize_cacheable'}, {'lnum': 431, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp.body, "<big>GET</big>"'}, {'lnum': 437, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.post forced_cache_url, "", @domain'}, {'lnum': 438, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 439, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=300"'}, {'lnum': 440, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp.body, "<big>POST</big>"'}, {'lnum': 442, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get forced_cache_url, @domain'}, {'lnum': 443, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 444, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp.body, "<big>GET</big>"'}, {'lnum': 445, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", nil'}, {'lnum': 446, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 451, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 452, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 453, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Proxy-Cache''], ''MISS'''}, {'lnum': 454, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "no-cache"'}, {'lnum': 455, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    resp = @fasterize_ptf.resp.body'}, {'lnum': 457, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 458, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 459, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Proxy-Cache''], ''MISS'''}, {'lnum': 460, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "no-cache"'}, {'lnum': 464, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 465, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 466, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Proxy-Cache''], ''MISS'''}, {'lnum': 467, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=31536000"'}, {'lnum': 469, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 470, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 471, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Proxy-Cache''], ''HIT'''}, {'lnum': 472, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "cache-control", "max-age=31536000"'}, {'lnum': 473, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal resp, @fasterize_ptf.resp.body'}, {'lnum': 489, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 493, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, celio_domain'}, {'lnum': 494, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 495, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "max-age=604800"'}, {'lnum': 496, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    no_cookie_body = @fasterize_ptf.resp.body'}, {'lnum': 498, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, celio_domain, {"Cookie" => ''ccs=1''}'}, {'lnum': 499, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 500, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 502, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, celio_domain, {"Cookie" => ''ccs=1''}'}, {'lnum': 503, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 504, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "max-age=604800"'}, {'lnum': 505, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    cookie_ccs1_body = @fasterize_ptf.resp.body'}, {'lnum': 511, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached static_url, celio_domain'}, {'lnum': 512, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 513, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "max-age=604800"'}, {'lnum': 516, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get static_url, celio_domain, {"Cookie" => ''ccs=1''}'}, {'lnum': 517, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 523, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, {"X-User-Agent-Class" => "bot"}'}, {'lnum': 524, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 526, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, {"X-User-Agent-Class" => "desktop_old"}'}, {'lnum': 527, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 533, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { "X-User-Agent-Class" => "desktop_old" }'}, {'lnum': 534, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 535, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 537, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal 0, @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 539, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, { ''X-User-Agent-Class'' => "desktop_recent" }'}, {'lnum': 540, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 542, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, { ''X-User-Agent-Class'' => "desktop_old" }'}, {'lnum': 543, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 547, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, { "User-Agent" => ua_string }'}, {'lnum': 548, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 549, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { "User-Agent" => ua_string }'}, {'lnum': 550, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 551, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 552, 'col': 39, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cache_test.rb', 'text': '    assert_equal nb_defered_scripts, @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 20, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 23, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet"/).length'}, {'lnum': 25, 'col': 30, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_fstrz_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz/).length'}, {'lnum': 27, 'col': 36, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_fstrz_print_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="print"/).length'}, {'lnum': 29, 'col': 37, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_fstrz_screen_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="screen"/).length'}, {'lnum': 31, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_fstrz_all_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="all"/).length'}, {'lnum': 34, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 37, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 39, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/1.css\nhttp://#{@domain}/stylesheets/concat/2.css\n*/"'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html packUri.to_s'}, {'lnum': 46, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual'}, {'lnum': 49, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 51, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    dt = DateTime.parse(@fasterize_ptf.resp["Last-Modified"])'}, {'lnum': 56, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    # @fasterize_ptf.assert_last_response_header ''Last-Modified'''}, {'lnum': 57, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "body{color:#00f}p{color:red}"'}, {'lnum': 60, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[1][0]'}, {'lnum': 61, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/3.css\nhttp://#{@domain}/stylesheets/concat/4.css\n*/"'}, {'lnum': 62, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "h1{color:#ff0}.some-class-4{color:red}"'}, {'lnum': 65, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[2][0]'}, {'lnum': 66, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/5.css\nhttp://#{@domain}/stylesheets/concat/6.css\nhttp://#{@domain}/stylesheets/concat/7.css\nhttp://#{@domain}/stylesheets/concat/7.css\n*/"'}, {'lnum': 67, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ".some-class-5{color:red}.some-class-6{color:red}.some-class-7{color:red}.some-class-7{color:red}"'}, {'lnum': 71, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[3][0]'}, {'lnum': 73, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{altdomain}/stylesheets/concat/10.css\n*/"'}, {'lnum': 78, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4b, @fasterize_ptf.resp.body'}, {'lnum': 79, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4c, @fasterize_ptf.resp.body'}, {'lnum': 80, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4d, @fasterize_ptf.resp.body'}, {'lnum': 81, 'col': 30, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard5, @fasterize_ptf.resp.body'}, {'lnum': 82, 'col': 135, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match /url\(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm4AAAAKCAMAAAA6jCJEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJl/, @fasterize_ptf.resp.body'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[4][0]'}, {'lnum': 86, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/7.css\nhttp://#{@domain}/stylesheets/concat/8.css\nhttp://#{@domain}/stylesheets/concat/9.css\n*/"'}, {'lnum': 87, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ".some-class-7{color:red}.some-class-8{color:red}"'}, {'lnum': 90, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[8][0]'}, {'lnum': 91, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "h1{color:#ff0}.some-class-4{color:red}.some-class-6{color:red}"'}, {'lnum': 92, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/import2.css\n*/"'}, {'lnum': 93, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_no_match /@import/, @fasterize_ptf.resp.body'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 104, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 105, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 106, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 108, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 110, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 111, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=604800'''}, {'lnum': 117, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "MSIE 9." }'}, {'lnum': 118, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 121, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_style_sheets = @fasterize_ptf.resp.body.scan(/<link rel="stylesheet"/).length'}, {'lnum': 129, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 130, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 131, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 135, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script src="/).length'}, {'lnum': 138, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_script_urls = @fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)'}, {'lnum': 140, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[0][0]'}, {'lnum': 141, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 142, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 143, 'col': 118, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number one"\);var __fstrzSep="";document\.write\("<br\/>number two"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 145, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[1][0]'}, {'lnum': 146, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 147, 'col': 121, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 149, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[2][0]'}, {'lnum': 150, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 151, 'col': 237, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\);var __fstrzSep="";document\.write\("<br\/>number three"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 158, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[0][0]'}, {'lnum': 159, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual'}, {'lnum': 192, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 194, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 195, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 197, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 198, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 200, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script src="/).length'}, {'lnum': 203, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_script_urls = @fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)'}, {'lnum': 219, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 220, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 222, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_script_url = @fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)[0][0]'}, {'lnum': 224, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_url'}, {'lnum': 225, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 226, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 232, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 233, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 235, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script src="/).length'}, {'lnum': 238, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    script_urls = @fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)'}, {'lnum': 246, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html script_not_concatened'}, {'lnum': 247, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 248, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''s-maxage=0, private, max-age=3600'''}, {'lnum': 251, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html script_urls[0][0]'}, {'lnum': 252, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 253, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 254, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html script_urls[2][0]'}, {'lnum': 255, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 256, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 267, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '      @fasterize_ptf.get url, @domain'}, {'lnum': 268, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '      @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 271, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    css_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet"( type="text\/css")? href="([^"]+)"/)'}, {'lnum': 293, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 294, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 295, 'col': 16, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    scripts = @fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)'}, {'lnum': 300, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script'}, {'lnum': 302, 'col': 39, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_not_match /\xef\xbb\xbf/, @fasterize_ptf.resp.body.force_encoding("utf-8"), ''should not have BOM'''}, {'lnum': 309, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @preview_domain'}, {'lnum': 310, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 311, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 312, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 314, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 315, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "#{get_sharded_domain_only(''/stylesheets/body-background-standard.png?frz-v1'', @preview_domain)}/stylesheets/body-background-standard.png?frz-v1"'}, {'lnum': 326, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 328, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 329, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 330, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 331, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 334, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached stylesheet_uri.request_uri, stylesheet_uri.host'}, {'lnum': 335, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 337, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "#{get_sharded_domain_only(''body-background-standard.png?frz-v1'', @domain)}/stylesheets/body-background-standard.png?frz-v1"'}, {'lnum': 346, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 348, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 349, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 350, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 351, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 357, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 359, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, get_sharded_domain_only(''/stylesheets/body-background-standard.png?frz-v1'', @domain) + "/fstrz/r/#{@domain}/stylesheets/body-background-standard.png?frz-v1"'}, {'lnum': 365, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 366, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 367, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 368, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "http://ajax.googleapis.com"'}, {'lnum': 374, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 375, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 376, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 377, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 378, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 390, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 393, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 394, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 395, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 397, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    html_doc = Nokogiri::HTML(@fasterize_ptf.resp.body)'}, {'lnum': 407, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 408, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 411, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 413, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    dt = DateTime.parse(@fasterize_ptf.resp["Last-Modified"])'}, {'lnum': 418, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    # @fasterize_ptf.assert_last_response_header ''Last-Modified'''}, {'lnum': 419, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "body{color:#00f}p{color:red}h1{color:#ff0}.some-class-4{color:red}"'}, {'lnum': 420, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/1.css\nhttp://#{@domain}/stylesheets/concat/2.css\nhttp://#{@domain}/stylesheets/concat/3.css\nhttp://#{@domain}/stylesheets/concat/4.css\n*/"'}, {'lnum': 422, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[1][0]'}, {'lnum': 423, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ".some-class-5{color:red}.some-class-6{color:red}.some-class-7{color:red}.some-class-7{color:red}"'}, {'lnum': 424, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/5.css\nhttp://#{@domain}/stylesheets/concat/6.css\nhttp://#{@domain}/stylesheets/concat/7.css\nhttp://#{@domain}/stylesheets/concat/7.css\n*/"'}, {'lnum': 426, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[2][0]'}, {'lnum': 431, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4b, @fasterize_ptf.resp.body'}, {'lnum': 432, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4c, @fasterize_ptf.resp.body'}, {'lnum': 433, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard4d, @fasterize_ptf.resp.body'}, {'lnum': 434, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{altdomain}/stylesheets/concat/10.css\n*/"'}, {'lnum': 436, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[3][0]'}, {'lnum': 438, 'col': 30, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match regShard5, @fasterize_ptf.resp.body'}, {'lnum': 439, 'col': 135, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_match /url\(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm4AAAAKCAMAAAA6jCJEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJl/, @fasterize_ptf.resp.body'}, {'lnum': 440, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ".some-class-7{color:red}.some-class-8{color:red}"'}, {'lnum': 441, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/7.css\nhttp://#{@domain}/stylesheets/concat/8.css\nhttp://#{@domain}/stylesheets/concat/9.css\n*/"'}, {'lnum': 452, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 455, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 456, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 457, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 459, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    html_doc = Nokogiri::HTML(@fasterize_ptf.resp.body)'}, {'lnum': 468, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    concat_stylesheet_urls = @fasterize_ptf.resp.body.scan(/rel="stylesheet" type="text\/css" href="([^"]+)"/)'}, {'lnum': 469, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 475, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 476, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 477, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 479, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    html_doc = Nokogiri::HTML(@fasterize_ptf.resp.body)'}, {'lnum': 502, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 503, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 504, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 506, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    html_doc = Nokogiri::HTML(@fasterize_ptf.resp.body)'}, {'lnum': 535, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 538, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 539, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 540, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 542, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    html_doc = Nokogiri::HTML(@fasterize_ptf.resp.body)'}, {'lnum': 552, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''20000'''}, {'lnum': 554, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    @fasterize_ptf.has_from_html get_sharded_domain(minified_url, @domain)'}, {'lnum': 555, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-fstrz''], ''vf,!o'''}, {'lnum': 556, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/concat_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/1.css\nhttp://#{@domain}/stylesheets/concat/2.css\n*/"'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 19, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < @origin.resp.body.length'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "#{url}&frz-compressimgs-aggressive=false", @domain'}, {'lnum': 31, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 32, 'col': 37, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    simple_compression_file_size = @fasterize_ptf.resp.body.length'}, {'lnum': 35, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 37, 'col': 41, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    aggressive_compression_file_size = @fasterize_ptf.resp.body.length'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 53, 'col': 41, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    aggressive_compression_file_size = @fasterize_ptf.resp.body.length'}, {'lnum': 54, 'col': 47, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    magick_optimized_image = Image.from_blob(@fasterize_ptf.resp.body)'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "#{url}&frz-compressimgs-progressive=false", @domain'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 70, 'col': 60, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    magick_optimized_no_interlace_image = Image.from_blob(@fasterize_ptf.resp.body)'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 74, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 75, 'col': 47, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    magick_optimized_image = Image.from_blob(@fasterize_ptf.resp.body)'}, {'lnum': 82, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 83, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 86, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 88, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert_equal notcompressed, @fasterize_ptf.resp.body'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "image/png"'}, {'lnum': 100, 'col': 40, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert @origin.resp.body.length > @fasterize_ptf.resp.body.length'}, {'lnum': 111, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 112, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 113, 'col': 36, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert  uncompressed.length > @fasterize_ptf.resp.body.length'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 120, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 122, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert_equal notcompressed, @fasterize_ptf.resp.body'}, {'lnum': 128, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 129, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 132, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '      @fasterize_ptf.get url, @domain'}, {'lnum': 133, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '      @fasterize_ptf.assert_not_cached'}, {'lnum': 137, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    assert_equal notcompressed, @fasterize_ptf.resp.body'}, {'lnum': 147, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 148, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "image/png"'}, {'lnum': 149, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Content-Encoding", nil'}, {'lnum': 150, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Transfer-Encoding", nil'}, {'lnum': 151, 'col': 37, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/image_test.rb', 'text': '    simple_compression_file_size = @fasterize_ptf.resp.body.length'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 16, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 17, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 0, img_number, @fasterize_ptf.get_last_response_error_message("no image should be inlined.")'}, {'lnum': 25, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 30, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 31, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 20, img_number, @fasterize_ptf.get_last_response_error_message("image should be inlined.")'}, {'lnum': 43, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 46, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 47, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 51, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 52, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 20, img_number, @fasterize_ptf.get_last_response_error_message("image should be inlined.")'}, {'lnum': 63, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 64, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 65, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 68, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 69, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 22, img_number, @fasterize_ptf.get_last_response_error_message("all the images should be inlined")'}, {'lnum': 77, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 82, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 83, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 22, img_number, @fasterize_ptf.get_last_response_error_message("all the images should be inlined")'}, {'lnum': 87, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.has page_url, @domain'}, {'lnum': 88, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 91, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 92, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 0, img_number, @fasterize_ptf.get_last_response_error_message("the images should not be inlined since the cache is flush")'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 102, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 105, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_input_img))).size'}, {'lnum': 106, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 20, img_number, @fasterize_ptf.get_last_response_error_message("the 20 first images should be inlined.")'}, {'lnum': 114, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain, {"User-Agent" => "MSIE 6."}'}, {'lnum': 115, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 119, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 120, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 0, img_number, @fasterize_ptf.get_last_response_error_message("no image should be inlined.")'}, {'lnum': 128, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached page_url, @domain, {"User-Agent" => "Googlebot"}'}, {'lnum': 129, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 130, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 133, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    img_number = @fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 134, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/inlining_test.rb', 'text': '    assert_equal 0, img_number, @fasterize_ptf.get_last_response_error_message("no image should be inlined.")'}, {'lnum': 8, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain, ''User-Agent'' => ''Googlebot'''}, {'lnum': 9, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Bot-Cache''], ''MISS'''}, {'lnum': 10, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    resp = @fasterize_ptf.resp.body'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    @fasterize_ptf.has url, @domain, ''User-Agent'' => ''Googlebot'''}, {'lnum': 14, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-Bot-Cache''], ''HIT'''}, {'lnum': 15, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    assert_equal resp, @fasterize_ptf.resp.body'}, {'lnum': 37, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '      @fasterize_ptf.has url, @domain, ''User-Agent'' => ''Googlebot'''}, {'lnum': 38, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '      assert_equal @fasterize_ptf.resp[''X-Bot-Cache''], ''HIT'''}, {'lnum': 40, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    end while ((resp == @fasterize_ptf.resp.body) && (slept < max_wait_time))'}, {'lnum': 41, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/bot_cache_test.rb', 'text': '    assert_not_equal resp, @fasterize_ptf.resp.body'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    @fasterize_ptf.has url, @demo_domain'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    @fasterize_ptf.resp.body.force_encoding(''utf-8'')'}, {'lnum': 12, 'col': 49, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.png\?var=aàéèâ/, @fasterize_ptf.resp.body'}, {'lnum': 13, 'col': 49, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.css\?var=aàéèâ/, @fasterize_ptf.resp.body'}, {'lnum': 14, 'col': 48, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.js\?var=aàéèâ/, @fasterize_ptf.resp.body'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-fixurlencoding=true", @demo_domain'}, {'lnum': 17, 'col': 65, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.png\?var=a%C3%A0%C3%A9%C3%A8%C3%A2/, @fasterize_ptf.resp.body'}, {'lnum': 18, 'col': 65, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.css\?var=a%C3%A0%C3%A9%C3%A8%C3%A2/, @fasterize_ptf.resp.body'}, {'lnum': 19, 'col': 64, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    assert_match /\/test\.js\?var=a%C3%A0%C3%A9%C3%A8%C3%A2/, @fasterize_ptf.resp.body'}, {'lnum': 25, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/fix_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 9, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''access-control-allow-origin'', "*"'}, {'lnum': 14, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 15, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/font_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''access-control-allow-origin'', "*"'}, {'lnum': 15, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf = HttpTest.create host, node, true'}, {'lnum': 16, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.default_headers[''x-frz-debug''] = ''true'''}, {'lnum': 17, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.default_headers[''x-frz-timeout''] = ''10000'''}, {'lnum': 18, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.default_headers[''Cookie''] = ''frz-canary=true'' if canary_mode?'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 21, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_not_include @fasterize_ptf.resp.body, ''/fstrz/'''}, {'lnum': 32, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 35, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 36, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_optimized_cached'}, {'lnum': 37, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 39, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_style_sheets = @secure_fasterize_ptf.resp.body.scan(/<link rel="stylesheet"/).length'}, {'lnum': 41, 'col': 37, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_fstrz_style_sheets = @secure_fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz/).length'}, {'lnum': 43, 'col': 43, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_fstrz_print_style_sheets = @secure_fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="print"/).length'}, {'lnum': 45, 'col': 44, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_fstrz_screen_style_sheets = @secure_fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="screen"/).length'}, {'lnum': 47, 'col': 41, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_fstrz_all_style_sheets = @secure_fasterize_ptf.resp.body.scan(/<link rel="stylesheet" href=.*?\/fstrz.* media="all"/).length'}, {'lnum': 50, 'col': 38, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    concat_stylesheet_urls = @secure_fasterize_ptf.resp.body.scan(/rel="stylesheet" href="([^"]+)"/)'}, {'lnum': 52, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[0][0]'}, {'lnum': 53, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttps://#{@domain}/stylesheets/concat/1.css\nhttps://#{@domain}/stylesheets/concat/2.css\n*/"'}, {'lnum': 54, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual_cached'}, {'lnum': 57, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 59, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    dt = DateTime.parse(@secure_fasterize_ptf.resp["Last-Modified"])'}, {'lnum': 64, 'col': 15, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    # @secure_fasterize_ptf.assert_last_response_header ''Last-Modified'''}, {'lnum': 65, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "body{color:#00f}p{color:red}"'}, {'lnum': 68, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[1][0]'}, {'lnum': 69, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttps://#{@domain}/stylesheets/concat/3.css\nhttps://#{@domain}/stylesheets/concat/4.css\n*/"'}, {'lnum': 70, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "h1{color:#ff0}.some-class-4{color:red}"'}, {'lnum': 73, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[2][0]'}, {'lnum': 74, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttps://#{@domain}/stylesheets/concat/5.css\nhttps://#{@domain}/stylesheets/concat/6.css\nhttps://#{@domain}/stylesheets/concat/7.css\nhttps://#{@domain}/stylesheets/concat/7.css\n*/"'}, {'lnum': 75, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, ".some-class-5{color:red}.some-class-6{color:red}.some-class-7{color:red}.some-class-7{color:red}"'}, {'lnum': 79, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[3][0]'}, {'lnum': 81, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttp://#{altdomain}/stylesheets/concat/10.css\n*/"'}, {'lnum': 82, 'col': 120, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(#{get_sharded_domain(''/imgs/logo.png?frz-v1'', altdomain)})")), @secure_fasterize_ptf.resp.body'}, {'lnum': 83, 'col': 132, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(#{get_sharded_domain("/stylesheets/imgs/logo.png?frz-v1", altdomain)})")), @secure_fasterize_ptf.resp.body'}, {'lnum': 84, 'col': 139, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(#{get_sharded_domain("/stylesheets/concat/imgs/logo.png?frz-v1", altdomain)})")), @secure_fasterize_ptf.resp.body'}, {'lnum': 85, 'col': 100, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(http://www.external.com/imgs/logo.png)")), @secure_fasterize_ptf.resp.body'}, {'lnum': 86, 'col': 142, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /url\(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm4AAAAKCAMAAAA6jCJEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJl/, @secure_fasterize_ptf.resp.body'}, {'lnum': 89, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[4][0]'}, {'lnum': 90, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, ".some-class-7{color:red}.some-class-8{color:red}"'}, {'lnum': 91, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttp://#{@domain}/stylesheets/concat/7.css\nhttp://#{@domain}/stylesheets/concat/8.css\n*/"'}, {'lnum': 94, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[5][0]'}, {'lnum': 95, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttps://#{@domain}/stylesheets/concat/9.css\n*/"'}, {'lnum': 96, 'col': 101, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(https://#{@domain}/imgs/logo.png?frz-v1")), @secure_fasterize_ptf.resp.body'}, {'lnum': 97, 'col': 113, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(https://#{@domain}/stylesheets/imgs/logo.png?frz-v1")), @secure_fasterize_ptf.resp.body'}, {'lnum': 98, 'col': 120, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(https://#{@domain}/stylesheets/concat/imgs/logo.png?frz-v1")), @secure_fasterize_ptf.resp.body'}, {'lnum': 99, 'col': 100, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match Regexp.new(Regexp::escape("url(http://www.external.com/imgs/logo.png)")), @secure_fasterize_ptf.resp.body'}, {'lnum': 100, 'col': 142, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /url\(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm4AAAAKCAMAAAA6jCJEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJl/, @secure_fasterize_ptf.resp.body'}, {'lnum': 103, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_stylesheet_urls[9][0]'}, {'lnum': 104, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "h1{color:#ff0}.some-class-4{color:red}.some-class-6{color:red}"'}, {'lnum': 105, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_includes @secure_fasterize_ptf.resp.body, "concat references:\nhttps://#{@domain}/stylesheets/import2.css\n*/"'}, {'lnum': 106, 'col': 40, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_no_match /@import/, @secure_fasterize_ptf.resp.body'}, {'lnum': 113, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 114, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_optimized_cached'}, {'lnum': 115, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 119, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    nb_scripts = @secure_fasterize_ptf.resp.body.scan(/<script src="/).length'}, {'lnum': 122, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    concat_script_urls = @secure_fasterize_ptf.resp.body.scan(/<script src="([^"]+)"/)'}, {'lnum': 124, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_script_urls[0][0]'}, {'lnum': 125, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual_cached'}, {'lnum': 126, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 127, 'col': 125, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number one"\);var __fstrzSep="";document\.write\("<br\/>number two"\)$/, @secure_fasterize_ptf.resp.body'}, {'lnum': 130, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_script_urls[1][0]'}, {'lnum': 131, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual_cached'}, {'lnum': 132, 'col': 128, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\)$/, @secure_fasterize_ptf.resp.body'}, {'lnum': 135, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_script_urls[2][0]'}, {'lnum': 136, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual_cached'}, {'lnum': 137, 'col': 186, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\)$/, @secure_fasterize_ptf.resp.body'}, {'lnum': 140, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_script_urls[3][0]'}, {'lnum': 141, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual_cached'}, {'lnum': 142, 'col': 71, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\)$/, @secure_fasterize_ptf.resp.body'}, {'lnum': 149, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_script_urls[0][0]'}, {'lnum': 150, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_virtual'}, {'lnum': 157, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached file_path, @domain'}, {'lnum': 158, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 162, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get file_path, @domain'}, {'lnum': 163, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_not_cached'}, {'lnum': 164, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached file_path, @domain'}, {'lnum': 165, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 175, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.get file_path, @domain'}, {'lnum': 176, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 177, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get file_path, @domain'}, {'lnum': 178, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_optimized_cached'}, {'lnum': 183, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get file_path, @domain'}, {'lnum': 184, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_not_cached'}, {'lnum': 192, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached page_url, @domain'}, {'lnum': 193, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 194, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 197, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    img_number = @secure_fasterize_ptf.resp.body.scan(Regexp.new(Regexp.escape(inlined_img))).size'}, {'lnum': 198, 'col': 42, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_equal 20, img_number, @secure_fasterize_ptf.get_last_response_error_message("image should be inlined.")'}, {'lnum': 207, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 208, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_optimized_cached'}, {'lnum': 209, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 214, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_not_include @secure_fasterize_ptf.resp.body, "https://" + sharding_domain_s0'}, {'lnum': 215, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_not_include @secure_fasterize_ptf.resp.body, "https://" + sharding_domain_s1'}, {'lnum': 217, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    concat_style_urls = @secure_fasterize_ptf.resp.body.scan(/<link.*href="([^"]+)"/)'}, {'lnum': 220, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    @secure_fasterize_ptf.has_from_html concat_style_urls[0][0]'}, {'lnum': 221, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_not_include @secure_fasterize_ptf.resp.body, "https://" + sharding_domain_s0'}, {'lnum': 222, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/https_test.rb', 'text': '    assert_not_include @secure_fasterize_ptf.resp.body, "https://" + sharding_domain_s1'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.get(url, @domain, ''User-Agent'' => ''iPhone'')'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 301'}, {'lnum': 14, 'col': 44, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    assert_match Regexp.new(mobile_host), @fasterize_ptf.resp[''Location''], "Response Location header should equal #{mobile_host}"'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, ''User-Agent'' => ''iPhone'')'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 28, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.get(url, @domain, ''User-Agent'' => ''iPhone'')'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 301'}, {'lnum': 30, 'col': 35, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    assert_match /m.domain.com/, @fasterize_ptf.resp[''Location''], "Response Location header should equal m.domain.com"'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, ''User-Agent'' => ''iPhone'')'}, {'lnum': 35, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 44, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.get(url, @domain, ''User-Agent'' => ''iPad'')'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 301'}, {'lnum': 46, 'col': 44, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    assert_match Regexp.new(tablet_host), @fasterize_ptf.resp[''Location''], "Response Location header should equal #{tablet_host}"'}, {'lnum': 50, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, ''User-Agent'' => ''iPad'')'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 59, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/redirections_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 9, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get url, @demo_domain'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.post url, "  ", @demo_domain'}, {'lnum': 14, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get url, @wrong_domain'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "535"'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "deleteme", nil'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "andme", nil'}, {'lnum': 54, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", "yummy"'}, {'lnum': 55, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 57, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 58, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 63, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.has url, remove_cookies_domain'}, {'lnum': 64, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 65, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "deleteme", "yes"'}, {'lnum': 66, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "andme", "yes"'}, {'lnum': 67, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, remove_cookies_domain'}, {'lnum': 71, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 74, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "deleteme", nil'}, {'lnum': 75, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "andme", nil'}, {'lnum': 76, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "set-cookie", nil'}, {'lnum': 90, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 91, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 92, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 94, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 95, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header "Cache-Control", "max-age=3600"'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.has url, @demo_domain'}, {'lnum': 110, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 111, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 113, 'col': 100, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    assert_equal "toto=1; Domain=#{@demo_domain}; Path=/; Expires=Sat, 01 Jan 2022 00:00:00 GMT", @fasterize_ptf.resp.get_fields(''set-cookie'')[0]'}, {'lnum': 114, 'col': 118, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    assert_equal "tata=1; Domain=.fstrz.net.#{@auto_origin_suffix}; Path=/; Expires=Sat, 01 Jan 2022 00:00:00 GMT", @fasterize_ptf.resp.get_fields(''set-cookie'')[1]'}, {'lnum': 124, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.has url, @demo_domain, {"Referer" => "http://#{@demo_domain}/#{TESTED_ENV}/home.html"}'}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 128, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain, {"Referer" => "http://#{@demo_domain}/#{TESTED_ENV}/home.html"}'}, {'lnum': 129, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 130, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 136, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 137, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 138, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 139, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_noconfig_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type=\"text\/frzjs\" frz_orig_src=/).length'}, {'lnum': 8, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''20000'''}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 11, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_equal @fasterize_ptf.resp["x-fstrz"], "vf,!o"'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''20000'''}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 504'}, {'lnum': 20, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_equal @fasterize_ptf.resp["x-fstrz"], "e"'}, {'lnum': 25, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''20000'''}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 28, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_equal @fasterize_ptf.resp["x-fstrz"], "vf,!o"'}, {'lnum': 29, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_no_match /@import/, @fasterize_ptf.resp.body'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-timeout''] = ''20000'''}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 41, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_equal @fasterize_ptf.resp["x-fstrz"], "vf,!o"'}, {'lnum': 42, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/virtual_resource_fallback_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''cache-control''], "max-age=300"'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get url, @preview_domain'}, {'lnum': 11, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''location''], "http://#{@preview_domain}/"'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get url, @preview_domain'}, {'lnum': 19, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''location''], ''http://www.google.com'''}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get url, @preview_domain'}, {'lnum': 27, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''location''], ''/toto'''}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get url, @preview_domain'}, {'lnum': 35, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''location''], "http://#{@preview_domain}/toto"'}, {'lnum': 44, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @preview_domain'}, {'lnum': 45, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(/href="([^"]+)/).length, "Has one href in page"'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.has preview_css, get_sharded_domain_only(preview_css, @preview_domain)'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.has url, @preview_domain'}, {'lnum': 62, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 63, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 65, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(/http:\/\/#{@preview_domain}\//).size, "We should have replaced one link"'}, {'lnum': 66, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(shardRegex).size, "We should have replaced one src with sharded domain"'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @preview_domain'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/preview_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached url, @domain'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, {''Cookie''=>''coucou=true''}'}, {'lnum': 21, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 22, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 28, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 29, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=150'''}, {'lnum': 31, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 37, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached cache_url, @domain'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 44, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached url, @domain'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 49, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 57, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 58, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cached'}, {'lnum': 59, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 60, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 64, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached url, @domain'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached url, @domain'}, {'lnum': 75, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 76, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 77, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 84, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version''] if @api.resp[''x-version'']'}, {'lnum': 88, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached url, @domain, {''Cookie'' => ''fstrz=true;''}'}, {'lnum': 91, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get url, @domain, {''Cookie'' => ''fstrz=false;''}'}, {'lnum': 92, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_wontoptimize_abtesting'}, {'lnum': 93, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=true", @domain'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 99, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    assert_equal ''true'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_res_eligible'}, {'lnum': 101, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=!0'''}, {'lnum': 102, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_and_cookielesscached "#{url}&frz-abtest=true", @domain'}, {'lnum': 104, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 105, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.has "#{url}&frz-abtest=false", @domain'}, {'lnum': 106, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 107, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    assert_equal ''false'', @fasterize_ptf.cookies[''fstrz''].value'}, {'lnum': 108, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 109, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''fstrz=false'''}, {'lnum': 110, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.assert_not_cookie_less_cached'}, {'lnum': 120, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/cookie_less_cache_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 22, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 24, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '      assert_not_nil @fasterize_ptf.cookies[''frz_of_id'']'}, {'lnum': 25, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '      assert_not_nil @fasterize_ptf.cookies[''frz_of_id.sig'']'}, {'lnum': 26, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '      cookie_expiration = @fasterize_ptf.cookies[''frz_of_id''].expires'}, {'lnum': 27, 'col': 53, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '      overflow_id, overflow_state, overflow_date = @fasterize_ptf.cookies[''frz_of_id''].value.split(''_'')'}, {'lnum': 30, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', expected_xfstrz_header_value'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 41, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {''pragma'' => ''no-cache''}'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has "/ping-fstrz-of", @domain'}, {'lnum': 59, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 60, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 70, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 71, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''o,ccb'''}, {'lnum': 72, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has "/ping-fstrz-of", @domain'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''of,en'''}, {'lnum': 76, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 77, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 81, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.enable_cookies # Reset cookies'}, {'lnum': 82, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 83, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "302"'}, {'lnum': 84, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''of,dis'''}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Set-Cookie'', nil'}, {'lnum': 86, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Location'', ''/overflow.html?frz-of-page=1'''}, {'lnum': 89, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached ''/overflow.html?frz-of-page=1'', @domain'}, {'lnum': 90, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 91, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Set-Cookie'', nil'}, {'lnum': 92, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has "/ping-fstrz-of", @domain'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''of,!id'''}, {'lnum': 108, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 110, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has "/ping-fstrz-of", @domain'}, {'lnum': 111, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''of,wen'''}, {'lnum': 114, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 115, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 119, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 120, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 121, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has "/ping-fstrz-of", @domain'}, {'lnum': 122, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''of,wen'''}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 126, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 127, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 133, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 134, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''X-fstrz'', ''o'''}, {'lnum': 135, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_no_cache_call_back'}, {'lnum': 136, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/overflow_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Set-Cookie'', nil'}, {'lnum': 9, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 11, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    assert_equal "frz-v1", @fasterize_ptf.resp.body.scan(Regexp.new(''wp-content/themes/Furvious/style-default\.css\?([^"]*)''))[0][0]'}, {'lnum': 12, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    assert_equal "frz-v1", @fasterize_ptf.resp.body.scan(Regexp.new(''/test/wp-content/uploads/2011/10/crashbus\.jpeg\?([^"]*)''))[0][0]'}, {'lnum': 13, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    assert_equal "frz-v1", @fasterize_ptf.resp.body.scan(Regexp.new(''wp-content/themes/Furvious/js/custom\.js\?([^"]*)''))[0][0]'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    @fasterize_ptf.get_until url, @domain, {}, 10 do |do_assert|'}, {'lnum': 17, 'col': 9, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '      !@fasterize_ptf.resp.body.include? "frz-v1"'}, {'lnum': 20, 'col': 9, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    if @fasterize_ptf.resp["X-fstrz"] == "w,p"'}, {'lnum': 22, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '        assert_equal "frz-v2", @fasterize_ptf.resp.body.scan(Regexp.new(''wp-content/themes/Furvious/style-default\.css\?([^"]*)''))[0][0]'}, {'lnum': 23, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '        assert_equal "frz-v2", @fasterize_ptf.resp.body.scan(Regexp.new(''/test/wp-content/uploads/2011/10/crashbus\.jpeg\?([^"]*)''))[0][0]'}, {'lnum': 24, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '        assert_equal "frz-v2", @fasterize_ptf.resp.body.scan(Regexp.new(''wp-content/themes/Furvious/js/custom\.js\?([^"]*)''))[0][0]'}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 29, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    assert_equal "frz-v2", @fasterize_ptf.resp.body.scan(Regexp.new(''/fstrz/[^.]*\.css\?src=[^"]*style-default.css%3F([^"]*)''))[0][0]'}, {'lnum': 30, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/versioning_test.rb', 'text': '    assert_equal "frz-v2", @fasterize_ptf.resp.body.scan(Regexp.new(''/fstrz/[^.]*\.js\?src=[^"]*custom.js%3F([^"]*)''))[0][0]'}, {'lnum': 21, 'col': 42, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    visit_until_ready(page, ''http://'' + @fasterize_ptf.ip + url)'}, {'lnum': 26, 'col': 49, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert prerender_link[''href''] == "http://#{@fasterize_ptf.ip}/test/life-in-st-petersburg/index.html"'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 54, 'col': 127, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_match /<img.*src=".*\/imgs\/red\.png\?frz-v1".*data-frz-src="wp-content\/uploads\/2011\/10\/loader_m_priv\.png"/, @fasterize_ptf.resp.body'}, {'lnum': 60, 'col': 42, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    visit_until_ready(page, ''http://'' + @fasterize_ptf.ip + url)'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid page.body'}, {'lnum': 92, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 98, 'col': 42, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    visit_until_ready(page, ''http://'' + @fasterize_ptf.ip + url)'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.assert_html_is_valid page.body'}, {'lnum': 107, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 134, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 143, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @demo_domain'}, {'lnum': 157, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until url, @domain, {}, 10 do |do_assert|'}, {'lnum': 158, 'col': 14, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      res = @fasterize_ptf.resp["X-fstrz"] && @fasterize_ptf.resp["X-fstrz"] == "o,sc,c" && !(/!o/ =~ @fasterize_ptf.resp[''X-fstrz''])'}, {'lnum': 159, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert res, "Response (#{@fasterize_ptf.resp["x-unique-id"]}) with status code #{@fasterize_ptf.resp.code} should have been optimized and cached but fstrz flag was: #{@fasterize_ptf.resp[''X-fstrz'']}" if do_assert'}, {'lnum': 162, 'col': 34, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_equal ''max-age=300'', @fasterize_ptf.resp[''cache-control'']'}, {'lnum': 163, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_not_nil @fasterize_ptf.resp[''expires'']'}, {'lnum': 164, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_nil @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 166, 'col': 12, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    yield @fasterize_ptf.resp.body'}, {'lnum': 168, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get "#{url}&frz-smartcache-fragment=true", @domain'}, {'lnum': 169, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 170, 'col': 39, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_equal ''application/json'', @fasterize_ptf.resp[''Content-Type'']'}, {'lnum': 171, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_equal ''test=1'', @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 173, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached "#{url}&frz-smartcache-fragment=true", @domain'}, {'lnum': 174, 'col': 39, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_equal ''application/json'', @fasterize_ptf.resp[''Content-Type'']'}, {'lnum': 175, 'col': 29, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_equal ''test=1'', @fasterize_ptf.resp[''set-cookie'']'}, {'lnum': 176, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    assert_nil @fasterize_ptf.resp[''cache-control'']'}, {'lnum': 178, 'col': 33, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    json_response = JSON.parse @fasterize_ptf.resp.body'}, {'lnum': 185, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    page.driver.allow_url(@fasterize_ptf.ip)'}, {'lnum': 187, 'col': 42, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    visit_until_ready(page, ''http://'' + @fasterize_ptf.ip + url)'}, {'lnum': 201, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 204, 'col': 54, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="greeting">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 205, 'col': 83, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="do_not_touch">\s*<p>Static content<\/p>\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 206, 'col': 50, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="cart">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 207, 'col': 96, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<script type="text\/frzjs" id="fstrz-sc-0" orig_index="1">\s*<\/script>/, @fasterize_ptf.resp.body'}, {'lnum': 208, 'col': 109, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<script type="text\/frzjs" orig_index="2">\s*console.log\("message2"\);\s*<\/script>/, @fasterize_ptf.resp.body'}, {'lnum': 209, 'col': 51, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="mydiv">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 229, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 232, 'col': 54, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="greeting">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 233, 'col': 83, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="do_not_touch">\s*<p>Static content<\/p>\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 234, 'col': 50, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="cart">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 235, 'col': 86, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<script type="text\/javascript" id="fstrz-sc-0">\s*<\/script>/, @fasterize_ptf.resp.body'}, {'lnum': 236, 'col': 99, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<script type="text\/javascript">\s*console.log\("message2"\);\s*<\/script>/, @fasterize_ptf.resp.body'}, {'lnum': 237, 'col': 51, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/browser_test.rb', 'text': '      assert_match /<div id="mydiv">\s*<\/div>/, @fasterize_ptf.resp.body'}, {'lnum': 11, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached(img, get_sharded_domain_only(img, @domain))'}, {'lnum': 12, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{img}&2", get_sharded_domain_only(img, @domain))'}, {'lnum': 18, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 19, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 27, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 28, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 29, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has "#{url}&2", @domain'}, {'lnum': 35, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 37, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 43, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url + "&frz-minifyhtml-keepcomment=true", @domain'}, {'lnum': 44, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 45, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 46, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "<!-- comment -->"'}, {'lnum': 48, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url + "&frz-minifyhtml-keepcomment=false", @domain'}, {'lnum': 49, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 50, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 51, 'col': 47, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /<!\-\- comment \-\->/, @fasterize_ptf.resp.body'}, {'lnum': 60, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached(url, @domain)'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 62, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    unoptimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 67, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&2", @domain)'}, {'lnum': 68, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 69, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 70, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < unoptimizedBody.length'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached(url, @domain)'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 81, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    unoptimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 86, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&2", @domain)'}, {'lnum': 87, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 88, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 89, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < unoptimizedBody.length'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 99, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 101, 'col': 32, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /.lzld/, @fasterize_ptf.resp.body'}, {'lnum': 103, 'col': 46, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /onload="lzld(this)"/, @fasterize_ptf.resp.body'}, {'lnum': 107, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&2", @domain)'}, {'lnum': 108, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 110, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 113, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ".lzld"'}, {'lnum': 115, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''onload="lzld(this)"'''}, {'lnum': 122, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 124, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 125, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 126, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 127, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 129, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    images_src = @fasterize_ptf.resp.body.scan(/<img src="([^"]+)"/)'}, {'lnum': 130, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    images_custom_src = @fasterize_ptf.resp.body.scan(/c-src="([^"]+)"/)'}, {'lnum': 131, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    images_custom_c_rel = @fasterize_ptf.resp.body.scan(/c-rel="([^"]+)"/)'}, {'lnum': 132, 'col': 31, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    images_custom_no_touch = @fasterize_ptf.resp.body.scan(/no-touch="([^"]+)"/)'}, {'lnum': 139, 'col': 18, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    spans_src = @fasterize_ptf.resp.body.scan(/<span src="([^"]+)" c-src="([^"]+)" no-touch="([^"]+)"/)'}, {'lnum': 151, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 152, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 153, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "/javascripts/concat/1.js?frz-v2"'}, {'lnum': 156, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&2", @domain)'}, {'lnum': 157, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 158, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 160, 'col': 21, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_include @fasterize_ptf.resp.body, get_virtual_resource_url(["/javascripts/concat/1.js?frz-v3",'}, {'lnum': 169, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 170, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 171, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "/stylesheets/concat/1.css?frz-v2"'}, {'lnum': 174, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&2", @domain)'}, {'lnum': 175, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 176, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 177, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body,'}, {'lnum': 189, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&frz-minifycss=true", @domain)'}, {'lnum': 190, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 191, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, minified_url'}, {'lnum': 192, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has_from_html get_sharded_domain(minified_url, @domain)'}, {'lnum': 193, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 195, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    minified_content = @fasterize_ptf.resp.body'}, {'lnum': 197, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached("#{url}&frz-minifycss=false", @domain)'}, {'lnum': 198, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 199, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, unminified_url'}, {'lnum': 200, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has_from_html get_sharded_domain(unminified_url, @domain)'}, {'lnum': 201, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_virtual_cached'}, {'lnum': 203, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    unminified_content = @fasterize_ptf.resp.body'}, {'lnum': 210, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 211, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 213, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, get_sharded_domain("/imgs/logo.png?frz-v1", @domain)'}, {'lnum': 214, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    concat_style_urls = @fasterize_ptf.resp.body.scan(/<link.*href="([^"]+)"/)'}, {'lnum': 216, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, sharding_domain'}, {'lnum': 219, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_style_urls[0][0]'}, {'lnum': 220, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, sharding_domain'}, {'lnum': 223, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 224, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 226, 'col': 45, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /#{sharding_domain}/, @fasterize_ptf.resp.body'}, {'lnum': 228, 'col': 82, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /#{get_sharded_domain("/imgs/logo.png?frz-v1", @domain)}/, @fasterize_ptf.resp.body'}, {'lnum': 229, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    concat_style_urls = @fasterize_ptf.resp.body.scan(/<link.*href="([^"]+)"/)'}, {'lnum': 233, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_style_urls[0][0]'}, {'lnum': 234, 'col': 45, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /#{sharding_domain}/, @fasterize_ptf.resp.body'}, {'lnum': 240, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 241, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 243, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "http://#{@domain}/fstrz/r/s/#{@domain}/imgs/logo.png?frz-v1"'}, {'lnum': 244, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "http://#{@domain}/fstrz/r/#{@domain}/stylesheets/unminified.css?frz-v1"'}, {'lnum': 245, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "http://#{@domain}/fstrz/r/#{@domain}/javascripts/unminified.js?frz-v1"'}, {'lnum': 246, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "http://#{@domain}/fstrz/r/#{@domain}/inlinestyle.png?frz-v1"'}, {'lnum': 248, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "/fstrz/r/s/#{@domain}/imgs/logo.png?frz-v1&test=1", @domain'}, {'lnum': 250, 'col': 69, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_equal "<#{expected_canonical_url}>; rel=\"canonical\"", @fasterize_ptf.resp[''link'']'}, {'lnum': 253, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 254, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 256, 'col': 39, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /\/fstrz\/r\//, @fasterize_ptf.resp.body'}, {'lnum': 264, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized(url, @domain)'}, {'lnum': 265, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 268, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain'}, {'lnum': 269, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "style.css%3Ffrz-v"'}, {'lnum': 272, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get(url, @domain)'}, {'lnum': 273, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_not_dynamic_cached'}, {'lnum': 274, 'col': 44, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_not_match /style.css%3Ffrz-v/, @fasterize_ptf.resp.body'}, {'lnum': 276, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized(url, @domain)'}, {'lnum': 277, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 279, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_dynamic_cached url, @domain'}, {'lnum': 283, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get(url, @domain)'}, {'lnum': 284, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_not_dynamic_cached'}, {'lnum': 289, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 292, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 293, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 294, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp[''set-cookie''].nil?'}, {'lnum': 295, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 298, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 301, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 302, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 303, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 304, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp[''set-cookie''].nil?'}, {'lnum': 306, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 311, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 314, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 315, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 316, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_equal ''true'', @fasterize_ptf.cookies[''frz-minifyhtml''].value'}, {'lnum': 317, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert Time.parse(@fasterize_ptf.cookies[''frz-minifyhtml''].expires) > Time.now'}, {'lnum': 318, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 321, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 324, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 325, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 326, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 327, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_equal ''false'', @fasterize_ptf.cookies[''frz-minifyhtml''].value'}, {'lnum': 328, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert Time.parse(@fasterize_ptf.cookies[''frz-minifyhtml''].expires) > Time.now'}, {'lnum': 330, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 335, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 336, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.cookies[''frz-minifyhtml''] = HttpCookie.new ''frz-minifyhtml=true'''}, {'lnum': 339, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 340, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 341, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp[''set-cookie''].nil?'}, {'lnum': 342, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 345, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 346, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.cookies[''frz-minifyhtml''] = HttpCookie.new ''frz-minifyhtml=false'''}, {'lnum': 349, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 350, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 351, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 352, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp[''set-cookie''].nil?'}, {'lnum': 354, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 357, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.enable_cookies'}, {'lnum': 358, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.cookies[''frz-minifyhtml''] = HttpCookie.new ''frz-minifyhtml=true'''}, {'lnum': 361, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 362, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 363, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 364, 'col': 28, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert_equal ''clear'', @fasterize_ptf.cookies[''frz-minifyhtml''].value'}, {'lnum': 365, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert Time.parse(@fasterize_ptf.cookies[''frz-minifyhtml''].expires) < Time.now'}, {'lnum': 368, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length == optimizedBody.length'}, {'lnum': 371, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 372, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 373, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 374, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp[''set-cookie''].nil?'}, {'lnum': 376, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 383, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_wontoptimize_and_cached(url, @domain)'}, {'lnum': 384, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 385, 'col': 24, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    unoptimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 390, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, @domain)'}, {'lnum': 391, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 392, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 393, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length < unoptimizedBody.length'}, {'lnum': 402, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 403, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 404, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 409, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has "#{url}&2", @domain'}, {'lnum': 410, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 411, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 412, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length > optimizedBody.length'}, {'lnum': 421, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 422, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 423, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    optimizedBody = @fasterize_ptf.resp.body'}, {'lnum': 428, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.has "#{url}&2", @domain'}, {'lnum': 429, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 430, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 431, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.length == optimizedBody.length'}, {'lnum': 440, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 443, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.match(/<img src=\".*\/imgs\/redcrush.png\?frz-v2\">/)'}, {'lnum': 444, 'col': 13, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/rules_test.rb', 'text': '    assert @fasterize_ptf.resp.body.match(/data-frz-src=\".*\/imgs\/red.png\?frz-v2\"/)'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 11, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<script type="text/frzjs" id="ext1" frz_orig_src="rewrite_javascript.js?frz-v1" orig_index="0"></script>'''}, {'lnum': 12, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<div onload="var e=this;if (this==window) e=document.body;e.setAttribute(\''data-frz-loaded\'', 1);" data-frz-onload="test();">'''}, {'lnum': 13, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<script type="text/template">'''}, {'lnum': 14, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<script type="text/frzjs" orig_index="1">'''}, {'lnum': 15, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<script type="text/frzjs" orig_index="2">'''}, {'lnum': 16, 'col': 78, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /<script src="\/\/#{@domain}\/fstrz\/defer-[a-f0-9]+.js"/, @fasterize_ptf.resp.body'}, {'lnum': 22, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 23, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 24, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 25, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 26, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 30, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    defer_script_url = @fasterize_ptf.resp.body.scan(/script src="([^"]*\/fstrz\/defer-[^\.]*.js)"/)[0][0]'}, {'lnum': 33, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.has defer_script_url.gsub("//","http://"), @domain'}, {'lnum': 34, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age='' + (3600 * 24 * 365).to_s'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 41, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 42, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 44, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 45, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 47, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_equal 8, @fasterize_ptf.resp.body.scan(/<script src="[^"]*"( defer )?>/).length # 8 not defered + deferjs script'}, {'lnum': 49, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    defer_script_url = @fasterize_ptf.resp.body.scan(/script src="([^"]*\/fstrz\/defer-[^\.]*.js)"/)[0][0]'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.has defer_script_url.gsub("//","http://"), @domain'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age='' + (3600 * 24 * 365).to_s'}, {'lnum': 59, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 60, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 61, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 63, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 64, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 69, 'col': 77, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /<!--\[if lt IE 10\]><script.*><\/script><!\[endif\]-->/, @fasterize_ptf.resp.body'}, {'lnum': 70, 'col': 123, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /<!--\[if gt IE 8\]><!-->\n*.*<script.*><\/script>\n*.*<script\n*.*><\/script>\n*.*<!--<!\[endif\]-->/, @fasterize_ptf.resp.body'}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "MSIE 6." }'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 80, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 82, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_equal 0, @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 88, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "Mozilla/5.0 (iPad; CPU OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko ) Version/5.1 Mobile/9B176 Safari/7534.48.3" }'}, {'lnum': 89, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 90, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 92, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_equal 0, @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "Googlebot" }'}, {'lnum': 99, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 101, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_equal 0, @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 107, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 108, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimizing'}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 111, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 112, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 115, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 116, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 117, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 119, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="/).length'}, {'lnum': 120, 'col': 20, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    nb_scripts += @fasterize_ptf.resp.body.scan(/<script frz_orig_src="[^"]*" type="text\/frzjs"/).length'}, {'lnum': 123, 'col': 27, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    concat_script_urls = @fasterize_ptf.resp.body.scan(/<script type="text\/frzjs" frz_orig_src="([^"]+)"/)'}, {'lnum': 124, 'col': 25, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    defer_script_url = @fasterize_ptf.resp.body.scan(/script src="([^"]*\/fstrz\/defer-[^\.]*.js)"/)[0][0]'}, {'lnum': 126, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[0][0]'}, {'lnum': 127, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age=3600'''}, {'lnum': 128, 'col': 118, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number one"\);var __fstrzSep="";document\.write\("<br\/>number two"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 130, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[1][0]'}, {'lnum': 131, 'col': 121, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 133, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.has_from_html concat_script_urls[2][0]'}, {'lnum': 134, 'col': 237, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    assert_match /^document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number three"\);var __fstrzSep="";document\.write\("<br\/>number four"\);var __fstrzSep="";document\.write\("<br\/>number three"\)$/, @fasterize_ptf.resp.body'}, {'lnum': 137, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.get defer_script_url.gsub("//","http://")'}, {'lnum': 138, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/deferjs_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''Cache-Control'', ''max-age='' + (3600 * 24 * 365).to_s'}, {'lnum': 13, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 14, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "text/plain; charset=UTF-8", @origin.resp.body'}, {'lnum': 16, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "text/plain; charset=UTF-8", @origin.resp.body'}, {'lnum': 24, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 25, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 26, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''cache-control'', ''max-age=900'''}, {'lnum': 35, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 36, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 38, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 39, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 40, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 51, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 52, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 53, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid ''iso-8859-1'''}, {'lnum': 54, 'col': 76, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match Regexp.new("MéCéKoiCéZaccents".encode("iso-8859-1")), @fasterize_ptf.resp.body.force_encoding("iso-8859-1")'}, {'lnum': 64, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 65, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 66, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid ''iso-8859-1'''}, {'lnum': 67, 'col': 76, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match Regexp.new("MéCéKoiCéZaccents".encode("iso-8859-1")), @fasterize_ptf.resp.body.force_encoding("iso-8859-1")'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 74, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "404"'}, {'lnum': 82, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 83, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response "200", "text/plain", "test virtual"'}, {'lnum': 96, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    # @fasterize_ptf.assert_last_response_header ''COntENT-type'', ''text/plain'''}, {'lnum': 98, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 100, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 101, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''content-type'', ''text/plain; charset=utf-8'''}, {'lnum': 109, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has uri, @domain'}, {'lnum': 110, 'col': 41, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    origin_request_header = JSON.parse @fasterize_ptf.resp.body'}, {'lnum': 112, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_equal expected_XFF,origin_request_header[''x-forwarded-for'']'}, {'lnum': 113, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_equal expected_XFF,origin_request_header[''true-client-ip'']'}, {'lnum': 123, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 126, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "/imgs/logo.png", get_sharded_domain_only("/imgs/logo.png", "static.domain.com")'}, {'lnum': 127, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 134, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 137, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "/imgs/logo.png", get_sharded_domain_only("/imgs/logo.png", "static2.domain.com")'}, {'lnum': 138, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 139, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached "/javascripts/jquery.js", get_sharded_domain_only("/javascripts/jquery.js", "static2.domain.com")'}, {'lnum': 140, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 149, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 171, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @preview_domain'}, {'lnum': 172, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 174, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<base\s+href=''([^'']+)''>/)[0][0])'}, {'lnum': 177, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<img\s+src="([^"]+png\?frz-v1)"/)[0][0])'}, {'lnum': 179, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" type="text\/css" href="([^"]+css\?frz-v1)"/)[0][0])'}, {'lnum': 181, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<script src="([^"]+js\?frz-v1)"/)[0][0])'}, {'lnum': 183, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 184, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 186, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<base\s+href=''([^'']+)'' \/>/)[0][0])'}, {'lnum': 189, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<img (?:.*)src="(.*png\?frz-v1)"/)[0][0])'}, {'lnum': 191, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<link rel="stylesheet" type="text\/css" href="([^"]+css\?frz-v1)"/)[0][0])'}, {'lnum': 193, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '      @fasterize_ptf.resp.body.scan(/<script src="([^"]+js\?frz-v1)"/)[0][0])'}, {'lnum': 202, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 203, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "301"'}, {'lnum': 204, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 205, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 214, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 215, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "302"'}, {'lnum': 216, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 217, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 228, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain, {"if-modified-since" => "Mon, 23 Apr 2012 13:45:00 GMT"}'}, {'lnum': 230, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 304'}, {'lnum': 232, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_res_not_eligible'}, {'lnum': 233, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_direct_proxying'}, {'lnum': 236, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"if-modified-since" => "Mon, 23 Apr 2011 13:45:00 GMT"}'}, {'lnum': 238, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 239, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 250, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 251, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 253, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain, {"If-modified-since" => "Mon, 23 Apr 2012 13:45:00 GMT"}'}, {'lnum': 254, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code 304'}, {'lnum': 255, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 258, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {"If-modified-since" => "Mon, 23 Apr 2011 13:45:00 GMT"}'}, {'lnum': 259, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized_cached'}, {'lnum': 260, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 271, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 272, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 273, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_equal 1, @fasterize_ptf.resp.body.scan(/onload=\"lzld/).length'}, {'lnum': 279, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "MSIE 6." }'}, {'lnum': 280, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert /lzld/ != @fasterize_ptf.resp.body, "Image should not be lazyloaded"'}, {'lnum': 286, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "Googlebot" }'}, {'lnum': 287, 'col': 23, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert /lzld/ != @fasterize_ptf.resp.body, "Image should not be lazyloaded"'}, {'lnum': 299, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain'}, {'lnum': 300, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 302, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, get_fasterized_domain(@domain)'}, {'lnum': 303, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, get_sharded_domain_only(url, @domain)'}, {'lnum': 304, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, get_sharded_domain_only(url, get_fasterized_domain(@domain))'}, {'lnum': 309, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 312, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "404"'}, {'lnum': 314, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @preview_domain'}, {'lnum': 315, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "User-agent: *\nDisallow: /"'}, {'lnum': 317, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, get_sharded_domain_only(url, @domain)'}, {'lnum': 318, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "User-agent: *\nAllow: /*.jpg*\nAllow: /*.png*\nAllow: /*.jpeg*\nAllow: /*.gif*\nAllow: /*.js*\nAllow: /*.css*\nDisallow: /"'}, {'lnum': 322, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 324, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @preview_domain'}, {'lnum': 325, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "User-agent: *\nDisallow: /"'}, {'lnum': 327, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, get_sharded_domain_only(url, @domain)'}, {'lnum': 328, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "404"'}, {'lnum': 334, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain'}, {'lnum': 335, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 337, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {''Pragma'' => ''no-cache''}'}, {'lnum': 338, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 339, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 341, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has url, @domain, {''Pragma'' => ''no-cache'', ''Cookie'' => ''fstrz=false''}'}, {'lnum': 342, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_req_not_eligible'}, {'lnum': 343, 'col': 60, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match /fstrz=true; path=\/; expires=.*1981.*/, @fasterize_ptf.resp[''Set-Cookie'']'}, {'lnum': 344, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 351, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.post url, body, @domain'}, {'lnum': 352, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 357, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 358, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 363, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 364, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "200"'}, {'lnum': 365, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_optimized'}, {'lnum': 366, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 368, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "style=\"background:url(''http:"'}, {'lnum': 374, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain'}, {'lnum': 375, 'col': 12, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    res = @fasterize_ptf.resp.body.scan(/beacon_url: "([^"]*)"/)'}, {'lnum': 415, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 419, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "Googlebot" }'}, {'lnum': 420, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 422, 'col': 64, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match /<script type="text\/frzjs" frz_orig_src="/, @fasterize_ptf.resp.body'}, {'lnum': 425, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 426, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 427, 'col': 64, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match /<script type="text\/frzjs" frz_orig_src="/, @fasterize_ptf.resp.body'}, {'lnum': 433, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 437, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached url, @domain, { ''User-Agent'' => "Googlebot" }'}, {'lnum': 438, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 440, 'col': 68, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_not_match /<script type="text\/frzjs" frz_orig_src="/, @fasterize_ptf.resp.body'}, {'lnum': 442, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized url, @domain'}, {'lnum': 443, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 445, 'col': 64, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_match /<script type="text\/frzjs" frz_orig_src="/, @fasterize_ptf.resp.body'}, {'lnum': 451, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 455, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get url, @domain, { ''X-Forwarded-For'' => "123.123.123.123" }'}, {'lnum': 456, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_code "403"'}, {'lnum': 457, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.assert_last_response_header ''x-fstrz'', ''b'''}, {'lnum': 464, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized page_url, @domain, { ''Authorization'' => "Basic dXNlcm5hbWU6cGFzc3dvcmQ=" }'}, {'lnum': 466, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''X-fstrz''], ''o'''}, {'lnum': 469, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, "/fstrz/"'}, {'lnum': 472, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached image_url, @domain, { ''Authorization'' => "Basic dXNlcm5hbWU6cGFzc3dvcmQ=" }'}, {'lnum': 473, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.has image_url, @domain'}, {'lnum': 481, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get(url, get_sharded_domain_only(url, @domain))'}, {'lnum': 482, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''Link''], "<#{canonical_url}>; rel=\"canonical\""'}, {'lnum': 484, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    @fasterize_ptf.get_until_optimized_cached(url, get_sharded_domain_only(url, @domain))'}, {'lnum': 485, 'col': 19, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/misc_test.rb', 'text': '    assert_equal @fasterize_ptf.resp[''Link''], "<#{canonical_url}>; rel=\"canonical\""'}, {'lnum': 21, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/static_test.rb', 'text': '      @fasterize_ptf.has url_rnd(url, 69), @domain'}, {'lnum': 22, 'col': 16, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/static_test.rb', 'text': '      first = @fasterize_ptf.resp.body'}, {'lnum': 25, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/static_test.rb', 'text': '      @fasterize_ptf.has url_rnd(url, 42), @domain'}, {'lnum': 26, 'col': 17, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/static_test.rb', 'text': '      second = @fasterize_ptf.resp.body'}, {'lnum': 66, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, {})'}, {'lnum': 67, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 68, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''<head><meta http-equiv="X-UA-Compatible" content="IE=edge" />after_opening_head_tag'''}, {'lnum': 72, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, {})'}, {'lnum': 73, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 74, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''before_closing_head_tag</head>'''}, {'lnum': 78, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, {})'}, {'lnum': 79, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 80, 'col': 22, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_includes @fasterize_ptf.resp.body, ''before_closing_body_tag</body>'''}, {'lnum': 84, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, {})'}, {'lnum': 85, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 86, 'col': 58, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_not_match /before_closing_body_tag<\/body>/, @fasterize_ptf.resp.body'}, {'lnum': 96, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, headers)'}, {'lnum': 97, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 98, 'col': 47, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_match Regexp.new(rules["match"]), @fasterize_ptf.resp.body, "Response body should contains script #{script_name} and match #{rules[''match'']}"'}, {'lnum': 102, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.has(url, @domain, headers)'}, {'lnum': 103, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.assert_last_response_html_is_valid'}, {'lnum': 104, 'col': 51, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    assert_not_match Regexp.new(rules["match"]), @fasterize_ptf.resp.body, "Response body should not contain script #{script_name} and should not match #{rules[''match'']}"'}, {'lnum': 114, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/functional/scripts_test.rb', 'text': '    @fasterize_ptf.default_headers[''x-frz-version''] = @api.resp[''x-version'']'}, {'lnum': 10, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/engine_test.rb', 'text': '    @fasterize_ptf = HttpTest.create find_lb'}, {'lnum': 12, 'col': 8, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/engine_test.rb', 'text': '      @fasterize_ptf.get resource, @domain'}, {'lnum': 17, 'col': 6, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/cache_test.rb', 'text': '    @fasterize_ptf = HttpTest.create find_lb'}, {'lnum': 21, 'col': 10, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/cache_test.rb', 'text': '        @fasterize_ptf.get resource, @domain'}, {'lnum': 24, 'col': 18, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/cache_test.rb', 'text': '      end while @fasterize_ptf.resp["X-fstrz"] != "o,c" && i < 20'}, {'lnum': 26, 'col': 26, 'valid': 1, 'vcol': 0, 'nr': -1, 'type': '', 'pattern': '', 'filename': 'test/perf/cache_test.rb', 'text': '    assert_equal "o,c", @fasterize_ptf.resp["X-fstrz"]'}])
let SessionLoad = 1
let s:so_save = &so | let s:siso_save = &siso | set so=0 siso=0
let v:this_session=expand("<sfile>:p")
silent only
cd ~/Fasterize/tests
if expand('%') == '' && !&modified && line('$') <= 1 && getline(1) == ''
  let s:wipebuf = bufnr('%')
endif
set shortmess=aoO
badd +313 spec/chef-roles/fasterize-cache_spec.rb
badd +66 spec/chef-roles/fasterize-ssl_spec.rb
badd +98 spec/chef-roles/fasterize-front_spec.rb
badd +38 spec/chef_spec_helper.rb
badd +1 Gemfile
badd +72 test/infra/front_test.rb
badd +85 helpers/env_helper.rb
badd +1 test/infra/ssl_test.rb
badd +54 test/failover/disable_test.rb
badd +4 Rakefile
badd +302 integration.env
badd +87 test/functional/abtesting_test.rb
badd +231 helpers/http_test_helper.rb
badd +19 test/infra/canary_test.rb
badd +51 test/functional_helper.rb
badd +191 test/functional/cache_test.rb
badd +117 spec/chef-roles/fasterize-proxy-app_spec.rb
argglobal
silent! argdel *
edit test/infra/ssl_test.rb
set splitbelow splitright
wincmd _ | wincmd |
vsplit
1wincmd h
wincmd w
wincmd t
set winheight=1 winwidth=1
exe 'vert 1resize ' . ((&columns * 21 + 68) / 136)
exe 'vert 2resize ' . ((&columns * 114 + 68) / 136)
argglobal
enew
" file NERD_tree_4
setlocal fdm=manual
setlocal fde=0
setlocal fmr={{{,}}}
setlocal fdi=#
setlocal fdl=0
setlocal fml=1
setlocal fdn=20
setlocal nofen
wincmd w
argglobal
setlocal fdm=manual
setlocal fde=0
setlocal fmr={{{,}}}
setlocal fdi=#
setlocal fdl=0
setlocal fml=1
setlocal fdn=20
setlocal fen
silent! normal! zE
let s:l = 59 - ((34 * winheight(0) + 31) / 62)
if s:l < 1 | let s:l = 1 | endif
exe s:l
normal! zt
59
normal! 069|
wincmd w
2wincmd w
exe 'vert 1resize ' . ((&columns * 21 + 68) / 136)
exe 'vert 2resize ' . ((&columns * 114 + 68) / 136)
tabnext 1
if exists('s:wipebuf') && getbufvar(s:wipebuf, '&buftype') isnot# 'terminal'
"   silent exe 'bwipe ' . s:wipebuf
endif
" unlet! s:wipebuf
set winheight=1 winwidth=20 shortmess=filnxtToO
let s:sx = expand("<sfile>:p:r")."x.vim"
if file_readable(s:sx)
  exe "source " . fnameescape(s:sx)
endif
let &so = s:so_save | let &siso = s:siso_save

" Support for special windows like quick-fix and plug-in windows.
" Everything down here is generated by vim-session (not supported
" by :mksession out of the box).

1wincmd w
tabnext 1
let s:bufnr_save = bufnr("%")
let s:cwd_save = getcwd()
NERDTree ~/Fasterize/tests
if !getbufvar(s:bufnr_save, '&modified')
  let s:wipebuflines = getbufline(s:bufnr_save, 1, '$')
  if len(s:wipebuflines) <= 1 && empty(get(s:wipebuflines, 0, ''))
    silent execute 'bwipeout' s:bufnr_save
  endif
endif
execute "cd" fnameescape(s:cwd_save)
1resize 62|vert 1resize 21|2resize 62|vert 2resize 114|
2wincmd w
tabnext 1
if exists('s:wipebuf')
  if empty(bufname(s:wipebuf))
if !getbufvar(s:wipebuf, '&modified')
  let s:wipebuflines = getbufline(s:wipebuf, 1, '$')
  if len(s:wipebuflines) <= 1 && empty(get(s:wipebuflines, 0, ''))
    silent execute 'bwipeout' s:wipebuf
  endif
endif
  endif
endif
doautoall SessionLoadPost
unlet SessionLoad
" vim: ft=vim ro nowrap smc=128
